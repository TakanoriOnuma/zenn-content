---
title: "MUIã®ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›UIã§resizeå¯èƒ½ã«ã™ã‚‹"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["mui"]
published: true
---

## å§‹ã‚ã«

MUIã®ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã«ã¤ã„ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯`resize`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¨­å®šã•ã‚Œã¦ãŠã‚‰ãšã€textareaã®ã‚µã‚¤ã‚ºã‚’ãƒ¦ãƒ¼ã‚¶å´ã§èª¿æ•´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã“ã‚Œã ã‘ã§ã‚ã‚Œã°Stack Overflowãªã©ã«æŠ•ç¨¿ã•ã‚Œã¦ã„ãŸå†…å®¹ã‚’ã‚‚ã¨ã«`resize`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã¦ã‚ã’ã‚Œã°è§£æ±ºã—ã¾ã—ãŸã€‚

https://stackoverflow.com/a/64596414

ã—ã‹ã—å®Ÿéš›ã«è¡¨ç¤ºã—ã¦ã¿ã‚‹ã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãŒoutlineã®å†…å´ã«è¡¨ç¤ºã•ã‚Œã¦ãŠã‚Šã€ã›ã£ã‹ããªã‚‰è¦‹ãŸç›®ã‚‚èª¿æ•´ã—ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚

![](/images/mui-resizable-text/inside-scrollbar.png)

ä»–ã«ã‚‚è‰²ã€…ã‚„ã‚‹ã“ã¨ãŒã‚ã£ãŸã®ã§æœ€çµ‚çš„ã«ã©ã†ã„ã†èª¿æ•´ã‚’ã—ãŸã‹å‚™å¿˜éŒ²ã¨ã—ã¦è¨˜äº‹ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚

## resizeå¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…

çµè«–ã‹ã‚‰æ›¸ãã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚Šã¾ã—ãŸã€‚è¦ç‚¹ã‚’ã¾ã¨ã‚ã‚‹ã¨ä»¥ä¸‹ã®ç‚¹ã«ãªã‚Šã¾ã™ã€‚

- TextFieldã¯ä½¿ã‚ãšã€ãã‚Œãã‚Œã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒå½“ãŸã£ã¦ã„ã‚‹ `Input`, `OutlinedInput` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¾®èª¿æ•´ã—ã¦ä½¿ç”¨ã—ãŸ
- ã‚¹ã‚¿ã‚¤ãƒ«ä¸Šæ›¸ãæ™‚ã¯multilineã®æ™‚ã ã‘ã§è‰¯ã„ãŸã‚ã€`&.MuiInputBase-multiline`ã¨ã„ã†ã‚¯ãƒ©ã‚¹åã§ä¸€è¡Œè¡¨ç¤ºã§ã¯ã‚¹ã‚¿ã‚¤ãƒ«ã«å½±éŸ¿ãŒãªã„ã‚ˆã†ã«ã—ãŸ
- paddingã¯è¦ªã§è¨­å®šã•ã‚ŒãŸå†…å®¹ã‚’ãã®ã¾ã¾textareaã®æ–¹ã«ä»˜ã‘æ›¿ãˆãŸ
- `minHeight`ã‚’æŒ‡å®šã—ã¦resizeã«ã‚ˆã‚‹é«˜ã•èª¿æ•´ã®æœ€å°å€¤ã‚’ç”¨æ„ã—ãŸ
  - ã“ã‚Œã«ã‚ˆã£ã¦å‹•ããŒå¤‰ã«ãªã£ãŸãŸã‚ã€`:first-child`ã«ã—ã¦å…ˆé ­ã®textareaã ã‘ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ã‚‹ã‚ˆã†ã«ã—ãŸï¼ˆè©³ç´°ã¯ãƒãƒã£ãŸã¨ã“ã‚ã§èª¬æ˜ï¼‰
- `resize`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¨­å®šã¯ã‚ãˆã¦`inputProps`ã§å¤–ã‹ã‚‰æ¸¡ã›ã‚‹ã‚ˆã†ã«ã—ãŸ
  - ãƒªã‚µã‚¤ã‚ºä¸å¯ã«ã—ãŸã„ã‚±ãƒ¼ã‚¹ã‚’è€ƒæ…®ã—ã¦ã€å¤–ã‹ã‚‰å¤‰æ›´å¯èƒ½ãªä½œã‚Šã«ã—ãŸ

```tsx:resizeå¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
import { FC } from 'react';
import type { FormControlProps, InputBaseProps } from '@mui/material';
import { FormControl, Input, InputLabel, OutlinedInput } from '@mui/material';
import { styled } from '@mui/material/styles';

const StyledStandardInput = styled(Input)(({ size }) => {
  return {
    // ãƒ«ãƒ¼ãƒˆã®paddingã‚’å–ã‚Šé™¤ã„ã¦ã€textareaã«å½“ã¦ç›´ã™
    '&.MuiInputBase-multiline': {
      padding: 0,
      // è¨ˆç®—ç”¨ã®textareaã«ã‚¹ã‚¿ã‚¤ãƒ«ãŒå½“ãŸã‚‰ãªã„ã‚ˆã†ã«ã€first-childæ“¬ä¼¼è¦ç´ ã‚‚ã¤ã‘ã¦å…ˆé ­ã®textareaã ã‘ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ã‚‹
      // https://github.com/mui/material-ui/blob/v5.15.9/packages/mui-base/src/TextareaAutosize/TextareaAutosize.tsx#L108-L110
      '& > .MuiInputBase-input:first-child': {
        boxSizing: 'border-box',
        padding: size === 'small' ? '1px 0 5px' : '4px 0 5px',
        minHeight: '24px',
      },
    },
  };
});

const StyledOutlinedInput = styled(OutlinedInput)(({ size }) => {
  return {
    // ãƒ«ãƒ¼ãƒˆã®paddingã‚’å–ã‚Šé™¤ã„ã¦ã€textareaã«å½“ã¦ç›´ã™
    '&.MuiInputBase-multiline': {
      padding: 0,
      '& > .MuiInputBase-input:first-child': {
        boxSizing: 'border-box',
        padding: size === 'small' ? '8.5px 14px' : '16.5px 14px',
        minHeight: size === 'small' ? '40px' : '56px',
      },
    },
  };
});

export type InputTextProps = {
  /** ãƒ†ã‚­ã‚¹ãƒˆ */
  value: string;
  variant?: Exclude<FormControlProps['variant'], 'filled'>;
  label?: string;
} & Pick<InputBaseProps, 'size' | 'rows' | 'minRows' | 'maxRows' | 'onChange'>;

export const InputText: FC<InputTextProps> = ({
  value,
  variant = 'standard',
  label,
  size,
  rows,
  minRows,
  maxRows,
  ...restProps
}) => {
  const isMultiline = rows != null || minRows != null || maxRows != null;

  const StyledInput =
    variant === 'outlined' ? StyledOutlinedInput : StyledStandardInput;

  return (
    <FormControl variant={variant} size={size} fullWidth>
      {label && <InputLabel>{label}</InputLabel>}
      <StyledInput
        value={value}
        label={label}
        multiline={isMultiline}
        size={size}
        rows={rows}
        minRows={minRows}
        maxRows={maxRows}
        inputProps={{
          style: {
            resize: isMultiline ? 'vertical' : undefined,
          },
        }}
        {...restProps}
      />
    </FormControl>
  );
};
```

StackBlitzã§æ¤œè¨¼ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¾ã—ãŸã®ã§ã€å‹•ä½œç¢ºèªã—ãŸã„æ–¹ã¯ã“ã¡ã‚‰ã‚’ã”å‚ç…§ãã ã•ã„ã€‚

@[stackblitz](https://stackblitz.com/edit/vitejs-vite-uiwne7?embed=1&file=src%2Fcomponents%2FInputText.tsx&view=preview)

## å®Ÿè£…æ™‚ã«ãƒãƒã£ãŸã“ã¨

### rowsæŒ‡å®šã«ã‚ˆã‚‹é«˜ã•ãŒå¤‰ã«ãªã‚‹

`resize`ã«ã‚ˆã‚‹é«˜ã•èª¿æ•´ã«æœ€å°å€¤ãŒãªã„ã¨ãºã¡ã‚ƒã‚“ã“ã«ãªã‚‹ã¾ã§å°ã•ãã§ãã¦ã—ã¾ã†ãŸã‚ã€å°‘ãªãã¨ã‚‚ä¸€è¡Œåˆ†ã®é«˜ã•ã¯ç¢ºä¿ã§ãã‚‹ã‚ˆã†ã«`minHeight`ã‚’è¨­å®šã—ã¾ã—ãŸã€‚ãŸã ã“ã‚Œã«ã‚ˆã£ã¦MUIã§`rows`ã‚’æŒ‡å®šã—ãŸæ™‚ã®é«˜ã•ãŒç‹‚ã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚
çµè«–ã‹ã‚‰è¨€ã†ã¨MUIã§ã¯ä¸€è¡Œåˆ†ã®é«˜ã•è¨ˆç®—ç”¨ã®textareaã‚’åˆ¥é€”ç”¨æ„ã—ã¦ãŠã‚Šã€ãã“ã«ã‚‚`minHeight`ã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒå½“ãŸã£ã¦ã—ã¾ã£ãŸã“ã¨ã«ã‚ˆã£ã¦ä¸€è¡Œåˆ†ã®é«˜ã•ãŒå¤‰ã«ãªã£ã¦ã„ãŸã®ãŒåŸå› ã§ã—ãŸã€‚

![](/images/mui-resizable-text/preview-textarea.png)

https://github.com/mui/material-ui/blob/v5.15.9/packages/mui-base/src/TextareaAutosize/TextareaAutosize.tsx#L108-L110
https://github.com/mui/material-ui/blob/v5.15.9/packages/mui-base/src/TextareaAutosize/TextareaAutosize.tsx#L264-L276

å¾“ã£ã¦ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ã‚‹éš›ã¯å…ˆé ­ã®textareaã ã‘é©å¿œã•ã‚Œã‚‹ã‚ˆã†ã«CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ã§è§£æ±ºã—ã¾ã—ãŸã€‚

```diff tsx:å…ˆé ­ã®textareaã ã‘ã«å½“ãŸã‚‹ã‚ˆã†ã«ä¿®æ­£
 const StyledOutlinedInput = styled(OutlinedInput)(({ size }) => {
   return {
     '&.MuiInputBase-multiline': {
       padding: 0,
       // è¨ˆç®—ç”¨ã®textareaã«ã¯ã‚¹ã‚¿ã‚¤ãƒ«ãŒå½“ãŸã‚‰ãªã„ã‚ˆã†ã«èª¿æ•´
-      '& > .MuiInputBase-input': {
+      '& > .MuiInputBase-input:first-child': {
         boxSizing: 'border-box',
         padding: size === 'small' ? '8.5px 14px' : '16.5px 14px',
         minHeight: size === 'small' ? '40px' : '56px',
       },
     },
   };
 });
```

## çµ‚ã‚ã‚Šã«

ä»¥ä¸ŠãŒMUIã®ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›UIã§resizeå¯èƒ½ã«ã™ã‚‹æ–¹æ³•ã§ã—ãŸã€‚çµè«–ã‚³ãƒ¼ãƒ‰ã ã‘ã¿ã‚‹ã¨ãã“ã¾ã§å¤§ã—ãŸã“ã¨ã§ã¯ãªã„ã®ã§ã™ãŒã€å½“æ™‚ã¯ä½•ãŒåŸå› ã‹åˆ†ã‹ã‚‰ãªã‹ã£ãŸãŸã‚å¤§åˆ†ãƒãƒã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ãã‚‚ãã‚‚paddingã‚’textareaå´ã«ã¤ã‘ã¦ãã‚Œã‚Œã°ã“ã‚“ãªã“ã¨ã—ãªãã¦æ¸ˆã‚“ã ã‚“ã§ã™ã‘ã©ã­ã€‚ã€‚
MUIã®textareaã«ã¤ã„ã¦ã€resizeã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ãŸã‚Šã‚¹ã‚¿ã‚¤ãƒ«ã®å¾®èª¿æ•´ã‚’ã™ã‚‹éš›ã®å‚è€ƒã«ãªã‚Œã‚Œã°å¹¸ã„ã§ã™ã€‚
